{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>{{ user.username }}'s Profile</h1>
    <p>Email: {{ user.email }}</p>
    {% if user.profile_picture %}
        <img src="{{ url_for('static', filename='uploads/' + user.profile_picture) }}" alt="Profile Picture" width="150" height="150">
    {% endif %}

    <h2>Friend List</h2>
    <ul>
        {% for friend in user.friends %}
            <li>{{ friend.username }}</li>
        {% endfor %}
    </ul>

    <h2>Edit Profile</h2>
    <form method="post">
        <div class="form-group">
            <label for="bio">Bio:</label>
            <textarea class="form-control" id="bio" name="bio">{{ user.bio }}</textarea>
        </div>
        <div class="form-group">
            <label for="location">Location:</label>
            <input type="text" class="form-control" id="location" name="location" value="{{ user.location }}">
        </div>
        <div class="form-group">
            <label for="interests">Interests:</label>
            <input type="text" class="form-control" id="interests" name="interests" value="{{ user.interests }}">
        </div>
        <div class="form-group">
            <label for="social_media_links">Social Media Links:</label>
            <input type="text" class="form-control" id="social_media_links" name="social_media_links" value="{{ user.social_media_links }}">
        </div>
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>

    <h2>Friend Requests</h2>
    {% if pending_requests %}
        <ul>
            {% for request in pending_requests %}
                <li>{{ request.sender.username }} <a href="{{ url_for('accept_friend_request', request_id=request.id) }}">Accept</a> <a href="{{ url_for('reject_friend_request', request_id=request.id) }}">Reject</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No pending friend requests.</p>
    {% endif %}

    <form action="{{ url_for('logout') }}" method="post">
        <button type="submit" class="btn btn-primary">Logout</button>
    </form>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Home</a>
</div>
{% endblock %}
